_.url={toAbsolute:function(c){var b=document.createElement("a");b.href=c;return b.href},encodeObject:function(c){var b="",a=0;_.each(c||{},function(e,d){if(e!==undefined){a++&&(b+="&");b+=encodeURIComponent(d);b+="=";b+=encodeURIComponent(e)}});return b},parsePairString:function(d,c,b,a){_.each(d.split(c),function(e){var f=e.split(b);a(f[0],f[1])})},regUrl:/(?:((?:[^:/]*):)\/\/)?([^:/?#]*)(?::([0-9]*))?(\/[^?#]*)?(\?[^#]*)?(#.*)?/,URL:function(a){if(_.url.regUrl.test(a)){this.protocol=RegExp.$1;this.hostname=RegExp.$2;this.port=RegExp.$3;this.pathname=RegExp.$4;this.search=RegExp.$5;this.hash=RegExp.$6}},parse:function(a){return new this.URL(a)},concatArg:function(b,a){b=this.parse(b);var c=this.encodeObject(_.omit(_.extend(b.arg,a),_.isUndefined));return b.origin+b.pathname+(c?"?":"")+c+b.hash},removeArg:function(a,b){a=this.parse(a);var c=this.encodeObject(_.pick(a.arg,function(e,d){return _.has(b,d)}));return a.origin+a.pathname+(c?"?":"")+c+a.hash}};_.url.URL.prototype.inspect=_.url.URL.prototype.valueOf=_.url.URL.prototype.toString=_.url.URL.prototype.toJSON=function(){return this.href};Object.defineProperties(_.url.URL.prototype,{href:{get:function(){return this.origin+this.pathname+this.search+this.hash}},host:{get:function(){return this.hostname+(this.port?":"+this.port:"")}},origin:{get:function(){return this.protocol?this.protocol+"//"+this.host:this.host}},arg:{get:function(){var a={};_.url.parsePairString(this.search.substring(1),"&","=",function(b,c){b!==""&&(a[b]=decodeURIComponent(c))});return a}}});