_.cursor=_.bind(function(){var c,a,d,b,j=this.EventCoordinateGetter("pageX"),i=this.EventCoordinateGetter("pageY"),e=this.eventName(["touchmove","MSPointerMove","mousemove"]),h=this.eventName(["touchstart","MSPointerDown","mousedown"]),f=this.eventName(["touchend","MSPointerUp","mouseup"]);_.element.bind(document,h,function(k){d=j(k);b=i(k)},true);_.element.bind(document,e,function(l){var k=j(l),m=i(l);c=_.isUndefined(d)?k:d;a=_.isUndefined(b)?m:b;d=k;b=m},true);var g={Event:function(k,l){return _.extend(l,{preventDefault:function(){k.preventDefault()},stopPropagation:function(){k.stopPropagation()},origin:k})},onPointerMove:function(m,k,l){return _.element.bind(m,e,function(n){k(g.Event(n,{x:d,y:b,dX:d-c,dY:b-a}))},l)},PointerBinder:function(k){return function(n,l,m){return _.element.bind(n,k,function(o){l(g.Event(o,{x:_.isUndefined(d)?j(o):d,y:_.isUndefined(b)?i(o):b}))},m)}},onMoveUp:function(k){var m=this.onPointerMove(document,function(n){k.onMove&&k.onMove(n)}),l=this.onPointerUp(document,function(n){m.remove();l.remove();k.onUp&&k.onUp(n)});return{remove:function(){m.remove();l.remove()}}}};return{onPointerMove:g.onPointerMove,onPointerDown:g.PointerBinder(h),onPointerUp:g.PointerBinder(f),onMoveUp:g.onMoveUp}},{eventName:function(a){return a[_.userAgent.canTouch?0:_.userAgent.msPointer?1:2]},EventCoordinateGetter:function(a){return function(b){return"touches" in b&&b.touches[0]!==undefined?b.touches[0][a]:b[a]}}})();