_.event={LinkedList:function(){var c=null,b=null;function a(d){if(d.inserted===true){d.previous?d.previous.next=d.next:c=d.next;d.next?d.next.previous=d.previous:b=d.previous;d.inserted=false}}return{head:function(){return c},tail:function(){return b},insert:function(f,d){if(f===d){return}a(f);var e=d?d.previous:b;f.next=d;f.previous=e;e?e.next=f:c=f;d?d.previous=f:b=f;f.inserted=true;return f},remove:a}},LinkedListForeach:function(b,a){var c;for(var d=b.head();d!==null;d=d.next){if((c=a(d))!==undefined){return c}}},LinkedListIterate:function(b,g,f,e){var d,c,h,i,a;if(_.isFunction(g)){d=null;c=g;h=f}else{d=g;c=f;h=e}for(i=b;i!==d;i=h?i.previous:i.next){if((a=c(i))!==undefined){return a}}},Event:function(){var a=this.LinkedList();return{trig:function(){for(var b=a.head();b!==null;b=b.next){b.apply(null,arguments)}},regist:function(b){var c=a.insert(b,null);return{func:b,remove:function(){a.remove(c)}}}}},concurrency:function(c,b){var a=c.length;a===0?b&&b():_.each(c,function(d){d(function(){--a===0&&b&&b()})})},Waiter:function(b){var a=this.Event();b(function(){if(a){a.trig();a=null}});return{onComplete:function(c){if(a){return a.regist(c)}else{c&&c();return{remove:function(){}}}},cancel:function(){a=null}}},Loader:function(c){var b,a=this;return{load:function(d){if(!b){b=a.Waiter(c)}return b.onComplete(d)}}},Schedule:function(){var a=null,b=false;return{prepare:function(c){a=c;b&&a()},start:function(){a&&a();b=true}}}};