var _cssTestCache={test:function(){if(window.CSS&&CSS.supports){return function(c,b){return CSS.supports(c,b)}}else{var a=document.createElement("div");return function(c,b){a.removeAttribute("style");a.style.setProperty(c,b,"");return a.hasAttribute("style")}}}(),testPrefix:function(c,a){var b=this;return _.map(["","-webkit-","-ms-","-moz-","-o-"],function(d){if(b.test(d+c,a)){return d}})[0]},testStyleName:function(){var a="";return function(c,b){return(a?this.test(a+c,b)?a:"":(a=this.testPrefix(c,b)))+c}}()};var _cssUnitCache={n:function(a){return Math.round(a*10000)/10000},px:function(a){return a===0?0:(_.isWindow(this)?_cssUnitCache.n(a):this.n(a)<<0)+"px"},rem:function(a){return a===0?0:(_.isWindow(this)?_cssUnitCache.n(a):this.n(a)<<0)+"rem"},deg:function(a){return a===0?0:_.isWindow(this)?_cssUnitCache.n(a):this.n(a)+"deg"}};var _cssCache={css:function(c,b,a){function d(e,f){if(e==null){remove(c,f)}else{if(_.isNumber(e)){e=_cssUnitCache.n(e)}c.style.setProperty(_cssTestCache.testStyleName(f,e),e,"")}}_.isString(b)?d(a,b):_.each(b,d);return{element:c,remove:function(){remove(c,b)}}},Rotate:function(a){return function(b){return _.string.tuple(a,[_cssUnitCache.deg(b)])}}};_.css=_.merge(_cssCache.css,_.merge(_.merge(_cssTestCache,_cssUnitCache),{ruleString:function(c,b){var a="";_.each(c,function(d,e){a+=[b?e:_cssTestCache.testStyleName(e,d.toString().replace("!important","")),":",d,";"].join("")});return a},remove:function(b,a){function c(d){_.each(["","-webkit-","-ms-","-moz-","-o-"],function(e){b.style.removeProperty(e+d)})}_.isString(a)?c(a):_.isObject(a)?_.each(a,c):_.each(a,c);return b},insertCSSRule:function(){var a=_.event.LinkedList(),b=_.event.LinkedList();return function(c,d){var g=d?b:a;if(g.el===undefined){g.el=document.head.insertBefore(document.createElement("style"),d?document.head.firstChild:null)}var f=g.tail(),e=g.insert({index:f===null?0:f.index+1});g.el.sheet.insertRule(c,e.index);return{remove:function(){var i=e.index;for(var h=e.next;h!==null;h=h.next){h.index=i++}g.remove(e);g.el.sheet.deleteRule(i)}}}}(),insertRules:function(c,b,a){var d=this;function e(g,j,h){var i=_.isString(j)?j:d.ruleString(j,/^@/.test(g));return d.insertCSSRule(g+" {"+i+"}",h)}if(_.isString(c)){return e(c,b,a)}else{var f=[];_.each(c,function(h,g){f.push(e(g,h,b))});return{remove:function(){_.each(f,function(g){g.remove()})}}}},full:function(a){return _.omit(_.extend({position:"absolute",left:0,right:0,top:0,bottom:0},a||{}),_.isUndefined)},size:function(c,b,a){_cssCache.css(c,{width:this.px(b),height:this.px(a)})},transform:function(){var a=[];_.each(arguments,function(b,c){c!==0&&a.push(b)});_cssCache.css(arguments[0],"transform",a.join(" "))},matrix:function(a){return _.string.tuple("matrix",_.map(a,this.n))},matrix3d:function(a){return _.string.tuple("matrix3d",_.map(a,this.n))},translate:function(a,d,c){var b=this;return _.string.tuple("translate3d",_.map([a,d,c],function(e){return _.isNumber(e)?b.px(e):e}))},rotateX:_cssCache.Rotate("rotateX"),rotateY:_cssCache.Rotate("rotateY"),rotateZ:_cssCache.Rotate("rotateZ"),scale:function(){return"scale("+Array.prototype.join.call(arguments,",")+")"},s:function(a){return this.n(a)+"s"},url:function(a){return _.string.tuple("url",[a])},bezier:function(a){return _.string.tuple("cubic-bezier",a)},center:function(a){return{position:"absolute",left:"50%",width:this.px(a),"margin-left":this.px(-a/2)}},middle:function(a){return{position:"absolute",top:"50%",height:this.px(a),"margin-top":this.px(-a/2)}}}));