(function(b){var c=b._||require("underscore");var e=Array.prototype.slice,d=Array.prototype.concat;var a=function(f){return f!=null};c.mixin({cat:function(){return c.reduce(arguments,function(g,f){if(c.isArguments(f)){return d.call(g,e.call(f))}else{return d.call(g,f)}},[])},cons:function(g,f){return c.cat([g],f)},chunk:function(i,h,g){var f=function(l){if(l==null){return[]}var j=c.take(l,h);if(h===c.size(j)){return c.cons(j,f(c.drop(l,h)))}else{return g?[c.take(c.cat(j,g),h)]:[]}};return f(i)},chunkAll:function(i,h,f){f=(f!=null)?f:h;var g=function(m,l,j){if(c.isEmpty(m)){return[]}return c.cons(c.take(m,l),g(c.drop(m,j),l,j))};return g(i,h,f)},mapcat:function(g,f){return c.cat.apply(null,c.map(g,f))},interpose:function(h,f){if(!c.isArray(h)){throw new TypeError}var g=c.size(h);if(g===0){return h}if(g===1){return h}return e.call(c.mapcat(h,function(i){return c.cons(i,[f])}),0,-1)},weave:function(){if(!c.some(arguments)){return[]}if(arguments.length==1){return arguments[0]}return c.filter(c.flatten(c.zip.apply(null,arguments),true),function(f){return f!=null})},interleave:c.weave,repeat:function(f,g){return c.times(f,function(){return g})},cycle:function(g,f){return c.flatten(c.times(g,function(){return f}),true)},splitAt:function(g,f){return[c.take(g,f),c.drop(g,f)]},iterateUntil:function(j,i,g){var h=[];var f=j(g);while(i(f)){h.push(f);f=j(f)}return h},takeSkipping:function(j,i){var g=[];var h=c.size(j);if(i<=0){return[]}if(i===1){return j}for(var f=0;f<h;f+=i){g.push(j[f])}return g},reductions:function(j,f,i){var g=[];var h=i;c.each(j,function(m,l){h=f(h,j[l]);g.push(h)});return g},keepIndexed:function(g,f){return c.filter(c.map(c.range(c.size(g)),function(h){return f(h,g[h])}),a)},reverseOrder:function(f){if(typeof f=="string"){throw new TypeError("Strings cannot be reversed by _.reverseOrder")}return e.call(f).reverse()}})})(this);(function(b){var c=b._||require("underscore");var g=Array.prototype.slice,f=Array.prototype.concat;var a=function(h){return h!=null};var d=function(h){return(h!==false)&&a(h)};var e=function(h){return(c.isArray(h))||(c.isArguments(h))};c.mixin({second:function(j,i,h){if(j==null){return void 0}return(i!=null)&&!h?g.call(j,1,i):j[1]},third:function(j,i,h){if(j==null){return void 0}return(i!=null)&&!h?g.call(j,2,i):j[2]},nth:function(j,h,i){if((h!=null)&&!i){return j[h]}},takeWhile:function(l,h){if(!e(l)){throw new TypeError}var j=c.size(l);for(var i=0;i<j;i++){if(!d(h(l[i]))){break}}return c.take(l,i)},dropWhile:function(l,h){if(!e(l)){throw new TypeError}var j=c.size(l);for(var i=0;i<j;i++){if(!d(h(l[i]))){break}}return c.drop(l,i)},splitWith:function(i,h){return[c.takeWhile(i,h),c.dropWhile(i,h)]},partitionBy:function(m,h){if(c.isEmpty(m)||!a(m)){return[]}var i=c.first(m);var j=h(i);var l=f.call([i],c.takeWhile(c.rest(m),function(n){return c.isEqual(j,h(n))}));return f.call([l],c.partitionBy(c.drop(m,c.size(l)),h))},best:function(i,h){return c.reduce(i,function(j,l){return h(j,l)?j:l})},keep:function(i,h){if(!e(i)){throw new TypeError("expected an array as the first argument")}return c.filter(c.map(i,function(j){return h(j)}),a)}})})(this);(function(g){var h=g._||require("underscore");var i={};var f={};var c="Not a tree: same object found in two different branches";function a(j){return h.isElement(j)?j.children:j}function b(l,p,n,q,o,m){var j=[];return(function r(x,v,w){if(h.isObject(x)){if(j.indexOf(x)>=0){throw new TypeError(c)}j.push(x)}if(n){var t=n.call(o,x,v,w);if(t===f){return f}if(t===i){return}}var s;var y=p(x);if(h.isObject(y)&&!h.isEmpty(y)){if(m){s=h.isArray(x)?[]:{}}var u=h.any(y,function(B,A){var z=r(B,A,x);if(z===f){return true}if(s){s[A]=z}});if(u){return f}}if(q){return q.call(o,x,v,w,s)}})(l)}function e(n,j,l){var m=[];this.preorder(n,function(p,o){if(!l&&o==j){return i}if(h.has(p,j)){m[m.length]=p[j]}});return m}var d={find:function(n,m,l){var j;this.preorder(n,function(q,o,p){if(m.call(l,q,o,p)){j=q;return f}},l);return j},filter:function(n,o,m,l){var j=[];if(n==null){return j}o(n,function(r,p,q){if(m.call(l,r,p,q)){j.push(r)}},null,this._traversalStrategy);return j},reject:function(m,n,l,j){return this.filter(m,n,function(q,o,p){return !l.call(j,q,o,p)})},map:function(n,o,m,l){var j=[];o(n,function(r,p,q){j[j.length]=m.call(l,r,p,q)},null,this._traversalStrategy);return j},pluck:function(l,j){return e.call(this,l,j,false)},pluckRec:function(l,j){return e.call(this,l,j,true)},postorder:function(n,m,l,j){j=j||this._traversalStrategy;b(n,j,null,m,l)},preorder:function(n,m,l,j){j=j||this._traversalStrategy;b(n,j,m,null,l)},reduce:function(n,m,j,l){var o=function(s,q,r,p){return m(p||j,s,q,r)};return b(n,this._traversalStrategy,null,o,l,true)}};d.collect=d.map;d.detect=d.find;d.select=d.filter;h.walk=function(j){var l=h.clone(d);h.bindAll.apply(null,[l].concat(h.keys(l)));l._traversalStrategy=j||a;return l};h.extend(h.walk,h.walk())})(this);(function(b){var d=b._||require("underscore");function a(g){return function f(){if(arguments.length===1){return g.apply(this,arguments)}else{throw new RangeError("Only a single argument may be accepted.")}}}var c=(function(){function f(m,l,n,i,j,h){if(h===true){i.unshift(j)}else{i.push(j)}if(i.length==n){return m.apply(l,i)}else{return a(function(){return f(m,l,n,i.slice(0),arguments[0],h)})}}return function g(j,h){var i=this;return a(function(){return f(j,i,j.length,[],arguments[0],h)})}}());var e=(function(){var f=[];return function g(i){if(typeof i!=="function"){throw new Error("Argument 1 must be a function.")}var h=i.length;if(f[h]===undefined){f[h]=function(j){return function(){if(arguments.length!==h){throw new RangeError(h+" arguments must be applied.")}return j.apply(this,arguments)}}}return f[h](i)}}());d.mixin({fix:function(g){var h=d.rest(arguments);var i=function(){var j=h.slice();var f=0;for(var l=0;l<(j.length||f<arguments.length);l++){if(j[l]===d){j[l]=arguments[f++]}}return g.apply(null,j)};i._original=g;return i},unary:function(f){return function g(h){return f.call(this,h)}},binary:function(f){return function g(i,h){return f.call(this,i,h)}},ternary:function(f){return function g(i,h,j){return f.call(this,i,h,j)}},quaternary:function(f){return function g(i,h,l,j){return f.call(this,i,h,l,j)}},curry:c,rCurry:function(f){return c.call(this,f,true)},curry2:function(g){return a(function f(h){return a(function(i){return g.call(this,h,i)})})},curry3:function(f){return a(function(g){return a(function(h){return a(function(i){return f.call(this,g,h,i)})})})},rcurry2:function(f){return a(function(g){return a(function(h){return f.call(this,h,g)})})},rcurry3:function(f){return a(function(g){return a(function(h){return a(function(i){return f.call(this,i,h,g)})})})},enforce:e});d.arity=(function(){var f={};return function g(h,j){if(f[h]==null){var o=new Array(h);for(var m=0;m<h;++m){o[m]="__"+m}var l=o.join();var n="return function ("+l+") { return fun.apply(this, arguments); };";f[h]=new Function(["fun"],n)}if(j==null){return function(i){return g(h,i)}}else{return f[h](j)}}})()})(this);(function(f){var g=f._||require("underscore");var c=function(j){return j!=null};var h=function(j){return(j!==false)&&c(j)};var e=[].reverse;var b=[].slice;var a=[].map;var i=function(l){return function j(n,m){if(arguments.length===1){return function(o){return l(n,o)}}else{return l(n,m)}}};function d(j,l){return g.arity(j.length,function(){return j.apply(this,a.call(arguments,l))})}g.mixin({always:g.constant,pipeline:function(){var j=(g.isArray(arguments[0]))?arguments[0]:arguments;return function(l){return g.reduce(j,function(m,n){return n(m)},l)}},conjoin:function(){var j=arguments;return function(l){return g.every(l,function(m){return g.every(j,function(n){return n(m)})})}},disjoin:function(){var j=arguments;return function(l){return g.some(l,function(m){return g.some(j,function(n){return n(m)})})}},comparator:function(j){return function(l,m){if(h(j(l,m))){return -1}else{if(h(j(m,l))){return 1}else{return 0}}}},complement:function(j){return function(){return !j.apply(this,arguments)}},splat:function(j){return function(l){return j.apply(this,l)}},unsplat:function(j){var l=j.length;if(l<1){return j}else{if(l===1){return function(){return j.call(this,b.call(arguments,0))}}else{return function(){var n=arguments.length,p=b.call(arguments,0,l-1),m=Math.max(l-n-1,0),o=new Array(m),q=b.call(arguments,j.length-1);return j.apply(this,p.concat(o).concat([q]))}}}},unsplatl:function(j){var l=j.length;if(l<1){return j}else{if(l===1){return function(){return j.call(this,b.call(arguments,0))}}else{return function(){var m=arguments.length,n=b.call(arguments,Math.max(m-l+1,0)),o=b.call(arguments,0,Math.max(m-l+1,0));return j.apply(this,[o].concat(n))}}}},mapArgs:i(d),juxt:function(){var j=arguments;return function(){var l=arguments;return g.map(j,function(m){return m.apply(this,l)},this)}},fnull:function(j){var l=g.rest(arguments);return function(){var m=g.toArray(arguments);var o=g.size(l);for(var n=0;n<o;n++){if(!c(m[n])){m[n]=l[n]}}return j.apply(this,m)}},flip2:function(j){return function(){var l=b.call(arguments);l[0]=arguments[1];l[1]=arguments[0];return j.apply(this,l)}},flip:function(j){return function(){var l=e.call(arguments);return j.apply(this,l)}},functionalize:function(j){return function(l){return j.apply(l,g.rest(arguments))}},methodize:function(j){return function(){return j.apply(null,g.cons(this,arguments))}},k:g.always,t:g.pipeline});g.unsplatr=g.unsplat;g.mapArgsWith=i(g.flip(d));g.bound=function(l,m){var j=l[m];if(!g.isFunction(j)){throw new TypeError("Expected property to be a function")}return g.bind(j,l)}})(this);(function(a){var b=a._||require("underscore");var c=Array.prototype.slice;b.mixin({attempt:function(e,g){if(e==null){return void 0}var f=e[g];var d=c.call(arguments,2);return b.isFunction(f)?f.apply(e,d):void 0}})})(this);(function(v,i){var z=v._||require("underscore");var t={};function o(B){return function(C){return B.call(this,C)}}function b(B){return function(D,C){return B.call(this,D,C)}}function y(C,D,B){var F,E;if(B!==void 0){F=B}else{F=C()}E=C();while(E!=null){F=D.call(E,F,E);E=C()}return F}function p(B,D){var C=t;return function(){if(C===t){C=B}else{if(C!=null){C=D.call(C,C)}}return C}}function c(B,E){var D=B,F,C;return function(){if(D!=null){F=E.call(D,D);C=F[1];D=C!=null?F[0]:void 0;return C}else{return void 0}}}function j(B,D,C){var E=C;return function(){var F=B();if(F==null){return F}else{if(E===void 0){E=F}else{E=D.call(F,E,F)}return E}}}function A(B,D,C){var G=C,F,E;return function(){E=B();if(E==null){return E}else{if(G===void 0){G=E;return G}else{F=D.call(E,G,E);G=F[0];return F[1]}}}}function x(B,C){return function(){var D;D=B();if(D!=null){return C.call(D,D)}else{return void 0}}}function h(C,D){var B=null;return function(){var E;var F;if(B==null){F=C();if(F==null){B=null;return void 0}B=D.call(F,F)}while(E==null){E=B();if(E==null){F=C();if(F==null){B=null;return void 0}else{B=D.call(F,F)}}}return E}}function s(B,C){return function(){var D;D=B();while(D!=null){if(C.call(D,D)){return D}D=B()}return void 0}}function g(B,C){return s(B,function(D){return !C(D)})}function r(B,C){return s(B,C)()}function u(B,C,D){var E=0;while(C-->0){B()}if(D!=null){return function(){if(++E<=D){return B()}else{return void 0}}}else{return B}}function m(B,C){return u(B,C==null?1:C)}function f(B,C){return u(B,0,C==null?1:C)}function d(C){var B=0;return function(){return C[B++]}}function w(E){var B,C,D;B=0;D=[];C=function(){var F,G;F=E[B++];if(F instanceof Array){D.push({array:E,index:B});E=F;B=0;return C()}else{if(F===void 0){if(D.length>0){G=D.pop();E=G.array;B=G.index;return C()}else{return void 0}}else{return F}}};return C}function n(B){return function(){return B}}function a(D,C,B){return function(){var E;if(D>C){return void 0}else{E=D;D=D+B;return E}}}function e(D,C,B){return function(){var E;if(D<C){return void 0}else{E=D;D=D-B;return E}}}function q(D,C,B){if(D==null){return a(1,Infinity,1)}else{if(C==null){return a(D,Infinity,1)}else{if(B==null){if(D<=C){return a(D,C,1)}else{return e(D,C,1)}}else{if(B>0){return a(D,C,B)}else{if(B<0){return e(D,C,Math.abs(B))}else{return k(D)}}}}}}var l=o(q);z.iterators={accumulate:j,accumulateWithReturn:A,foldl:y,reduce:y,unfold:p,unfoldWithReturn:c,map:x,mapcat:h,select:s,reject:g,filter:s,find:r,slice:u,drop:m,take:f,List:d,Tree:w,constant:n,K:n,numbers:l,range:q}})(this,void 0);(function(a){var b=a._||require("underscore");b.mixin({isInstanceOf:function(c,d){return(c instanceof d)},isAssociative:function(c){return b.isArray(c)||b.isObject(c)||b.isArguments(c)},isIndexed:function(c){return b.isArray(c)||b.isString(c)||b.isArguments(c)},isSequential:function(c){return(b.isArray(c))||(b.isArguments(c))},isPlainObject:function(c){return b.isObject(c)&&c.constructor===a.Object},isZero:function(c){return 0===c},isEven:function(c){return b.isFinite(c)&&(c&1)===0},isOdd:function(c){return b.isFinite(c)&&!b.isEven(c)},isPositive:function(c){return c>0},isNegative:function(c){return c<0},isValidDate:function(c){return b.isDate(c)&&!b.isNaN(c.getTime())},isNumeric:function(c){return !isNaN(parseFloat(c))&&isFinite(c)},isInteger:function(c){return b.isNumeric(c)&&c%1===0},isFloat:function(c){return b.isNumeric(c)&&!b.isInteger(c)},isJSON:function(d){try{JSON.parse(d)}catch(c){return false}return true},isIncreasing:function(){var d=b.size(arguments);if(d===1){return true}if(d===2){return arguments[0]<arguments[1]}for(var c=1;c<d;c++){if(arguments[c-1]>=arguments[c]){return false}}return true},isDecreasing:function(){var d=b.size(arguments);if(d===1){return true}if(d===2){return arguments[0]>arguments[1]}for(var c=1;c<d;c++){if(arguments[c-1]<=arguments[c]){return false}}return true}})})(this);(function(b){var c=b._||require("underscore");var g=Array.prototype.slice,e=Array.prototype.concat;var a=function(i){return i!=null};var d=function(i){return(i!==false)&&a(i)};var h=function(i){return c.isArray(i)||c.isObject(i)};var f=function(i){return function(j){return function(l){return i(l,j)}}};c.mixin({merge:function(){var i=c.some(arguments)?{}:null;if(d(i)){c.extend.apply(null,e.call([i],c.toArray(arguments)))}return i},renameKeys:function(j,i){return c.reduce(i,function(n,m,l){if(a(j[l])){n[m]=j[l];return n}else{return n}},c.omit.apply(null,e.call([j],c.keys(i))))},snapshot:function(l){if(l==null||typeof(l)!="object"){return l}var i=new l.constructor();for(var j in l){if(l.hasOwnProperty(j)){i[j]=c.snapshot(l[j])}}return i},updatePath:function(j,n,p,o){if(!h(j)){throw new TypeError("Attempted to update a non-associative object.")}if(!a(p)){return n(j)}var i=c.isArray(p);var r=i?p:[p];var m=i?c.snapshot(j):c.clone(j);var q=c.last(r);var l=m;c.each(c.initial(r),function(s){if(o&&!c.has(l,s)){l[s]=c.clone(o)}l=l[s]});l[q]=n(l[q]);return m},setPath:function(l,j,m,i){if(!a(m)){throw new TypeError("Attempted to set a property at a null path.")}return c.updatePath(l,function(){return j},m,i)},frequencies:f(c.countBy)(c.identity)})})(this);(function(c){var e=c._||require("underscore");var f=Array.prototype.concat;var b=Array.prototype;var g=b.slice;e.mixin({accessor:function(h){return function(i){return(i&&i[h])}},dictionary:function(h){return function(i){return(h&&i&&h[i])}},selectKeys:function(h,i){return e.pick.apply(null,f.call([h],i))},kv:function(i,h){if(e.has(i,h)){return[h,i[h]]}return void 0},getPath:function a(h,i){if(typeof i=="string"){i=i.split(".")}if(h===undefined){return void 0}if(i.length===0){return h}if(h===null){return void 0}return a(h[e.first(i)],e.rest(i))},hasPath:function d(i,j){if(typeof j=="string"){j=j.split(".")}var h=j.length;if(i==null&&h>0){return false}if(!(j[0] in i)){return false}if(h===1){return true}return d(i[e.first(j)],e.rest(j))},pickWhen:function(i,h){var j={};e.each(i,function(m,l){if(h(i[l])){j[l]=i[l]}});return j},omitWhen:function(i,h){return e.pickWhen(i,function(j){return !h(j)})}})})(this);(function(a){var b=a._||require("underscore");b.mixin({exists:function(c){return c!=null},truthy:function(c){return(c!==false)&&b.exists(c)},falsey:function(c){return !b.truthy(c)},not:function(c){return !c},firstExisting:function(){for(var c=0;c<arguments.length;c++){if(arguments[c]!=null){return arguments[c]}}}})})(this);(function(v){var B=v._||require("underscore");function x(C){return function(){return B.reduce(arguments,C)}}function d(C){return function(){var D;for(var E=0;E<arguments.length-1;E++){D=C(arguments[E],arguments[E+1]);if(D===false){return D}}return D}}function o(C){return function(){return !C.apply(this,arguments)}}function q(C,D){return C+D}function l(C,D){return C-D}function w(C,D){return C*D}function p(C,D){return C/D}function y(C,D){return C%D}function m(C){return ++C}function t(C){return --C}function a(C){return -C}function n(C,D){return C&D}function z(C,D){return C|D}function g(C,D){return C^D}function f(C,D){return C<<D}function h(C,D){return C>>D}function b(C,D){return C>>>D}function u(C){return ~C}function A(C,D){return C==D}function s(C,D){return C===D}function e(C){return !C}function r(C,D){return C>D}function i(C,D){return C<D}function j(C,D){return C>=D}function c(C,D){return C<=D}B.mixin({add:x(q),sub:x(l),mul:x(w),div:x(p),mod:y,inc:m,dec:t,neg:a,eq:d(A),seq:d(s),neq:o(d(A)),sneq:o(d(s)),not:e,gt:d(r),lt:d(i),gte:d(j),lte:d(c),bitwiseAnd:x(n),bitwiseOr:x(z),bitwiseXor:x(g),bitwiseNot:u,bitwiseLeft:x(f),bitwiseRight:x(h),bitwiseZ:x(b)})})(this);(function(b){var e=b._||require("underscore");var d=/\+/g;var g=/\%20/g;var c=/(?:([^\[]+))|(?:\[(.*?)\])/g;var a=function(i){return decodeURIComponent(i.replace(d,"%20"))};var h=function(i){return encodeURIComponent(i).replace(g,"+")};var f=function(i,l,j){if(e.isUndefined(j)){j=true}if(e.isArray(l)){return e.map(l,function(n,m){return f(j?m:i+"[]",n,false)}).join("&")}else{if(e.isObject(l)){return e.map(l,function(n,m){return f(j?m:i+"["+m+"]",n,false)}).join("&")}else{return h(i)+"="+h(l)}}};e.mixin({explode:function(i){return i.split("")},fromQuery:function(n){var r=n.split("&"),l={},o,p,m,q,j,i;e.each(r,function(s){s=s.split("=");p=a(s[0]);q=p;i=l;c.lastIndex=0;while((m=c.exec(p))!==null){if(!e.isUndefined(m[1])){j=m[1]}else{j=m[2];i[q]=i[q]||(j?{}:[]);i=i[q]}q=j||e.size(i)}i[q]=a(s[1])});return l},implode:function(i){return i.join("")},camelCase:function(i){return i.replace(/-([a-z])/g,function(j){return j[1].toUpperCase()})},toDash:function(i){i=i.replace(/([A-Z])/g,function(j){return"-"+j.toLowerCase()});return(i.charAt(0)=="-")?i.substr(1):i},toQuery:function(i){return f("",i)},strContains:function(j,i){if(typeof j!="string"){throw new TypeError}return(j.indexOf(i)!=-1)}})})(this);(function(a){var b=a._||require("underscore");b.mixin({done:function(d){var c=b(d);c.stopTrampoline=true;return c},trampoline:function(d){var c=d.apply(d,b.rest(arguments));while(b.isFunction(c)){c=c();if((c instanceof b)&&(c.stopTrampoline)){break}}return c.value()}})})(this);