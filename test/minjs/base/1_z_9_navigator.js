/*! kahn1990_new_book 2016-05-22 */
function deviceDetection(a){var b=a(navigator.userAgent,navigator.appVersion,navigator.platform);switch(!0){case b.android.length>1:b.osType="android",b.osName="android",b.osVersion=b.android[2];break;case b.ios===!0:switch(b.osType="ios",!0){case b.iphone.length>1:b.osVersion=b.iphone[2].replace(/_/g,"."),b.osName="iphone",480===screen.height?document.documentElement.classList.add("iphone4"):568===screen.height?document.documentElement.classList.add("iphone5"):screen.height>568&&document.documentElement.classList.add("iphone6+");break;case b.ipad.length>1:b.osVersion=b.ipad[2].replace(/_/g,"."),b.osName="ipad";break;case b.ipod.length>1:b.osVersion=b.ipod[3]?_this.ipod[3].replace(/_/g,"."):null,b.osName="ipod";break;default:b.osVersion="undefined",b.osName="undefined"}b.ios&&b.osVersion&&navigator.userAgent.indexOf("Version/")>=0&&"10"===b.osVersion.split(".")[0]&&(b.osVersion=navigator.userAgent.toLowerCase().split("version/")[1].split(" ")[0]);break;default:b.osType="undefined"}if(b.win32&&document.documentElement.classList.add("win32"),"undefined"!==b.osType&&(b.classNames.push(b.osType,b.osType+"-"+b.osVersion.split(".")[0],b.osType+"-"+b.osVersion.replace(/\./g,"-")),"ios"===b.osType))for(var c=parseInt(b.osVersion.split(".")[0],10),d=c-1;d>=6;d--)b.classNames.push("ios-gt-"+d);if(b.classNames.push("pixel-ratio-"+Math.floor(b.pixelRatio)),b.pixelRatio>=2&&b.classNames.push("retina"),b.classNames.length>0)for(var e=0;e<b.classNames.length;e++)document.documentElement.classList.add(b.classNames[e]);return{osType:b.osType,osName:b.osName,osVersion:b.osVersion,isWeiXin:b.MicroMessenger,iswebView:(b.iphone||b.ipad||b.ipod)&&navigator.userAgent.match(/.*AppleWebKit(?!.*Safari)/i)||!1,support:{canTouch:b.canTouch,msPointer:b.msPointer}}}_k.deviceOs=deviceDetection(function(a,b,c){return{win32:"Win32"===c,ie:!!window.ActiveXObject||"ActiveXObject"in window,ieVersion:Math.floor((/MSIE ([^;]+)/.exec(a)||[0,"0"])[1]),ios:/iphone|ipad|ipod/gi.test(b),ipad:a.match(/(iPad).*OS\s([\d_]+)/)||!1,ipod:a.match(/(iPod)(.*OS\s([\d_]+))?/)||!1,iphone:!a.match(/(iPad).*OS\s([\d_]+)/)&&a.match(/(iPhone\sOS)\s([\d_]+)/)||!1,safari:/Version\//gi.test(b)&&/Safari/gi.test(b),uiWebView:/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(a),android:a.match(/(Android);?[\s\/]+([\d.]+)?/)||!1,androidChrome:a.toLowerCase().indexOf("chrome")>=0,chrome:/Chrome/gi.test(a),chromeVersion:parseInt((/Chrome\/([0-9]*)/gi.exec(a)||[0,0])[1],10),webkit:/AppleWebKit/.test(b),uc:-1!==b.indexOf("UCBrowser"),Browser:/ Browser/gi.test(b),MiuiBrowser:/MiuiBrowser/gi.test(b),MicroMessenger:"micromessenger"==a.toLowerCase().match(/MicroMessenger/i),pixelRatio:window.devicePixelRatio||1,canTouch:"ontouchstart"in document,msPointer:window.navigator.msPointerEnabled,classNames:[],osType:"",osName:"",osVersion:[],mi4:/Mi 4LTE/gi.test(navigator.userAgent)}});